
--DROP TABLE FileDetails
--DROP TABLE CdDetails

CREATE TABLE CdDetails (
  CdId NVARCHAR(50) NOT NULL,
  ScannedBy NVARCHAR(50) NOT NULL,
  ScannedDate DATETIME NOT NULL, 
  Notes NVARCHAR(2000) NULL,
  CONSTRAINT PK_CdDetails PRIMARY KEY CLUSTERED (CdId)
  )

CREATE TABLE FileDetails (
  FileId INT NOT NULL IDENTITY (1,1),
  CdId NVARCHAR(50) NOT NULL REFERENCES CdDetails(CdId),
  [FileName] NVARCHAR(255) NOT NULL,
  FullPath NVARCHAR(750) NOT NULL,
  FileSize BIGINT NOT NULL,
  CreateDate DATETIME NOT NULL,
  CONSTRAINT PK_FileDetails PRIMARY KEY NONCLUSTERED (FileId),
  CONSTRAINT UQ_FileDetails UNIQUE (CdId, FullPath),
  )

CREATE CLUSTERED INDEX IX_FileDetails_CdId ON FileDetails(CdId, [FileName])

